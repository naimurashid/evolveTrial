<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Adaptive Clinical Trial Utilities • evolveTrial</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Adaptive Clinical Trial Utilities">
<meta name="description" content="Helpers for Bayesian adaptive platform/umbrella clinical trials, including simulation, decision rules, and reporting.">
<meta property="og:description" content="Helpers for Bayesian adaptive platform/umbrella clinical trials, including simulation, decision rules, and reporting.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">evolveTrial</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/design-overview.html">design-overview</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="evolvetrial">evolveTrial<a class="anchor" aria-label="anchor" href="#evolvetrial"></a>
</h1></div>
<!-- badges: start -->

<p><strong>evolveTrial</strong> is an R package for designing and simulating Bayesian adaptive clinical trials with time-to-event or binary endpoints. It supports single-arm, multi-arm, and hybrid seamless (single-arm-to-between-arm) trial designs with interim stopping rules based on posterior probabilities.</p>
<p>The package was developed for the ARPA-H ADAPT breast cancer platform trial and accompanies the JASA paper:</p>
<blockquote>
<p>Rashid, N. (2026). “Constrained Bayesian Optimization for Calibration of Bayesian Adaptive Clinical Trials.” <em>Journal of the American Statistical Association</em>.</p>
</blockquote>
<div class="section level2">
<h2 id="features">Features<a class="anchor" aria-label="anchor" href="#features"></a>
</h2>
<ul>
<li>
<strong>Single-arm vs historical control</strong>: evaluate efficacy against a historical benchmark with Bayesian posterior probability decision rules</li>
<li>
<strong>Multi-arm adaptive trials</strong>: compare experimental arms to a reference arm under proportional hazards</li>
<li>
<strong>Hybrid seamless designs</strong>: 4-state machine transitioning from single-arm monitoring to between-arm comparison with predictive-probability-based conversion decisions</li>
<li>
<strong>Binary endpoints</strong>: Simon two-stage designs with exact operating characteristics</li>
<li>
<strong>Piecewise exponential hazards</strong>: flexible time-to-event modeling with interval-specific rates</li>
<li>
<strong>C++ acceleration</strong>: posterior sampling, hazard computations, and hybrid trial simulation via Rcpp and RcppArmadillo</li>
<li>
<strong>Design calibration</strong>: grid search over decision thresholds with Pareto-optimal filtering</li>
<li>
<strong>Operating characteristics</strong>: type I error, power, expected sample size, probability of early termination, and conversion rates</li>
</ul>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<div class="section level3">
<h3 id="c-compiler-prerequisites">C++ Compiler Prerequisites<a class="anchor" aria-label="anchor" href="#c-compiler-prerequisites"></a>
</h3>
<p>evolveTrial contains compiled C++ code (via Rcpp/RcppArmadillo) that must be built during installation. You need a working C++ toolchain.</p>
<div class="section level4">
<h4 id="windows">Windows<a class="anchor" aria-label="anchor" href="#windows"></a>
</h4>
<p>Install <strong>Rtools</strong> before installing evolveTrial:</p>
<ol style="list-style-type: decimal">
<li>Download from <a href="https://cran.r-project.org/bin/windows/Rtools/" class="external-link uri">https://cran.r-project.org/bin/windows/Rtools/</a>
</li>
<li>Choose the version matching your R version (e.g., Rtools44 for R 4.4.x)</li>
<li>Run the installer with default settings</li>
<li>Restart R/RStudio</li>
</ol>
<p>Verify:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Sys.which.html" class="external-link">Sys.which</a></span><span class="op">(</span><span class="st">"make"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Should return a path like "C:/rtools44/usr/bin/make.exe"</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="macos">macOS<a class="anchor" aria-label="anchor" href="#macos"></a>
</h4>
<p>Install <strong>Xcode Command Line Tools</strong>:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="ex">xcode-select</span> <span class="at">--install</span></span></code></pre></div>
<p>On Apple Silicon (M1/M2/M3/M4), you may also need gfortran for RcppArmadillo:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">brew</span> install gcc</span></code></pre></div>
<p>Verify:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/system.html" class="external-link">system</a></span><span class="op">(</span><span class="st">"clang++ --version"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="linux-ubuntudebian">Linux (Ubuntu/Debian)<a class="anchor" aria-label="anchor" href="#linux-ubuntudebian"></a>
</h4>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">sudo</span> apt-get install r-base-dev build-essential liblapack-dev libblas-dev</span></code></pre></div>
</div>
<div class="section level4">
<h4 id="linux-fedorarhel">Linux (Fedora/RHEL)<a class="anchor" aria-label="anchor" href="#linux-fedorarhel"></a>
</h4>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="fu">sudo</span> dnf install R-devel gcc-c++ lapack-devel blas-devel</span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="install-from-github">Install from GitHub<a class="anchor" aria-label="anchor" href="#install-from-github"></a>
</h3>
<p>R &gt;= 4.1 is recommended due to Rcpp/RcppArmadillo usage.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Using pak (recommended)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"pak"</span><span class="op">)</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"naimurashid/evolveTrial"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Or using remotes</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"naimurashid/evolveTrial"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Or using devtools</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"naimurashid/evolveTrial"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="install-from-local-source">Install from Local Source<a class="anchor" aria-label="anchor" href="#install-from-local-source"></a>
</h3>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="fu">git</span> clone https://github.com/naimurashid/evolveTrial.git</span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install</span><span class="op">(</span><span class="st">"path/to/evolveTrial"</span><span class="op">)</span></span>
<span><span class="co"># Or for development:</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">load_all</span><span class="op">(</span><span class="st">"path/to/evolveTrial"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="troubleshooting">Troubleshooting<a class="anchor" aria-label="anchor" href="#troubleshooting"></a>
</h3>
<table class="table">
<colgroup>
<col width="58%">
<col width="41%">
</colgroup>
<thead><tr class="header">
<th>Error</th>
<th>Fix</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>
<code>compilation failed</code> or <code>make: not found</code>
</td>
<td>Install Rtools (Windows) or Xcode CLI tools (macOS)</td>
</tr>
<tr class="even">
<td><code>'RcppArmadillo.h' file not found</code></td>
<td>
<code>install.packages("RcppArmadillo")</code> then retry</td>
</tr>
<tr class="odd">
<td>
<code>library not found for -lgfortran</code> (macOS)</td>
<td><code>brew install gcc</code></td>
</tr>
<tr class="even">
<td>Installation times out</td>
<td><code>remotes::install_github("naimurashid/evolveTrial", build_vignettes = FALSE)</code></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level2">
<h2 id="quick-start-examples">Quick Start Examples<a class="anchor" aria-label="anchor" href="#quick-start-examples"></a>
</h2>
<div class="section level3">
<h3 id="example-1-single-arm-survival-trial">Example 1: Single-Arm Survival Trial<a class="anchor" aria-label="anchor" href="#example-1-single-arm-survival-trial"></a>
</h3>
<p>Simulate a single-arm trial evaluating an experimental therapy against a historical control median of 6 months, with an expected treatment median of 9 months.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">evolveTrial</span><span class="op">)</span></span>
<span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/run_simulation_pure.html">run_simulation_pure</a></span><span class="op">(</span></span>
<span>  num_simulations           <span class="op">=</span> <span class="fl">500</span>,</span>
<span>  arm_names                 <span class="op">=</span> <span class="st">"Experimental"</span>,</span>
<span>  reference_arm_name        <span class="op">=</span> <span class="st">"Experimental"</span>,</span>
<span>  compare_arms_option       <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>  weibull_shape_true_arms   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>Experimental <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>  weibull_median_true_arms  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>Experimental <span class="op">=</span> <span class="fl">9</span><span class="op">)</span>,</span>
<span>  interval_cutpoints_sim    <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">3</span>, <span class="fl">6</span>, <span class="fl">9</span>, <span class="fl">12</span>, <span class="fl">15</span>, <span class="fl">18</span>, <span class="fl">21</span>, <span class="fl">24</span><span class="op">)</span>,</span>
<span>  max_follow_up_sim         <span class="op">=</span> <span class="fl">24</span>,</span>
<span>  censor_max_time_sim       <span class="op">=</span> <span class="fl">24</span>,</span>
<span>  prior_alpha_params_model  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0.01</span>, <span class="fl">8</span><span class="op">)</span>,</span>
<span>  prior_beta_params_model   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0.01</span>, <span class="fl">8</span><span class="op">)</span>,</span>
<span>  num_posterior_draws       <span class="op">=</span> <span class="fl">5000</span>,</span>
<span>  cohort_size_per_arm       <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>Experimental <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>  max_total_patients_per_arm <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>Experimental <span class="op">=</span> <span class="fl">60</span><span class="op">)</span>,</span>
<span>  efficacy_stopping_rule_hc <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  efficacy_threshold_hc_prob <span class="op">=</span> <span class="fl">0.95</span>,</span>
<span>  futility_stopping_rule_hc  <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  futility_threshold_hc_prob <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span>  median_pfs_success_threshold_arms <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>Experimental <span class="op">=</span> <span class="fl">6</span><span class="op">)</span>,</span>
<span>  overall_accrual_rate      <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  randomization_probs       <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>Experimental <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>  min_events_hc             <span class="op">=</span> <span class="fl">15</span>,</span>
<span>  interim_calendar_beat     <span class="op">=</span> <span class="fl">3</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Result is a data.frame -- inspect directly</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span></span>
<span><span class="co">#&gt;      Arm_Name True_Median Type_I_Error_or_Power PET_Efficacy PET_Futility ...</span></span>
<span><span class="co">#&gt; 1 Experimental           9                  0.82         0.45         0.02 ...</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="example-2-binary-simon-two-stage-design">Example 2: Binary Simon Two-Stage Design<a class="anchor" aria-label="anchor" href="#example-2-binary-simon-two-stage-design"></a>
</h3>
<p>Find an optimal Simon design and verify its operating characteristics via simulation.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">evolveTrial</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Find optimal Simon design: H0: p=0.20, H1: p=0.40</span></span>
<span><span class="va">design</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/find_simon_design.html">find_simon_design</a></span><span class="op">(</span>p0 <span class="op">=</span> <span class="fl">0.20</span>, p1 <span class="op">=</span> <span class="fl">0.40</span>, alpha <span class="op">=</span> <span class="fl">0.05</span>, beta <span class="op">=</span> <span class="fl">0.20</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">design</span><span class="op">)</span></span>
<span><span class="co">#&gt;   n1 r1  n  r n2 EN_null EN_alt PET_null PET_alt type1_error power criterion</span></span>
<span><span class="co">#&gt; 1 13  2 43 11 30    21.8   34.2     0.60    0.26       0.048  0.81   optimal</span></span>
<span></span>
<span><span class="co"># Confirm via simulation using the Simon design parameters</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/run_simulation_binary.html">run_simulation_binary</a></span><span class="op">(</span></span>
<span>  num_simulations              <span class="op">=</span> <span class="fl">2000</span>,</span>
<span>  arm_names                    <span class="op">=</span> <span class="st">"Arm_A"</span>,</span>
<span>  true_response_prob           <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>Arm_A <span class="op">=</span> <span class="fl">0.40</span><span class="op">)</span>,</span>
<span>  n1_per_arm                   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>Arm_A <span class="op">=</span> <span class="va">design</span><span class="op">$</span><span class="va">n1</span><span class="op">)</span>,</span>
<span>  n_total_per_arm              <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>Arm_A <span class="op">=</span> <span class="va">design</span><span class="op">$</span><span class="va">n</span><span class="op">)</span>,</span>
<span>  p0                           <span class="op">=</span> <span class="fl">0.20</span>,</span>
<span>  r1_per_arm                   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>Arm_A <span class="op">=</span> <span class="va">design</span><span class="op">$</span><span class="va">r1</span><span class="op">)</span>,</span>
<span>  r_per_arm                    <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>Arm_A <span class="op">=</span> <span class="va">design</span><span class="op">$</span><span class="va">r</span><span class="op">)</span>,</span>
<span>  use_simon_rules              <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span></span>
<span><span class="co">#&gt;   Arm_Name True_Response_Prob Type_I_Error_or_Power PET_Efficacy PET_Futility ...</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="example-3-hybrid-seamless-sa-to-ba-trial">Example 3: Hybrid Seamless SA-to-BA Trial<a class="anchor" aria-label="anchor" href="#example-3-hybrid-seamless-sa-to-ba-trial"></a>
</h3>
<p>Simulate a hybrid trial that begins with single-arm monitoring and can convert to a between-arm comparison if sufficient evidence accumulates.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">evolveTrial</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Define the hybrid design parameter vector</span></span>
<span><span class="va">theta</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/create_hybrid_theta.html">create_hybrid_theta</a></span><span class="op">(</span></span>
<span>  eff_sa            <span class="op">=</span> <span class="fl">0.90</span>,</span>
<span>  fut_sa            <span class="op">=</span> <span class="fl">0.10</span>,</span>
<span>  hr_threshold_sa   <span class="op">=</span> <span class="fl">0.80</span>,</span>
<span>  ev_sa             <span class="op">=</span> <span class="fl">15</span>,</span>
<span>  nmax_sa           <span class="op">=</span> <span class="fl">40</span>,</span>
<span>  conversion_trigger <span class="op">=</span> <span class="st">"any_single_success"</span>,</span>
<span>  pp_go             <span class="op">=</span> <span class="fl">0.70</span>,</span>
<span>  pp_nogo           <span class="op">=</span> <span class="fl">0.20</span>,</span>
<span>  ss_method         <span class="op">=</span> <span class="st">"predictive"</span>,</span>
<span>  max_additional_n  <span class="op">=</span> <span class="fl">60</span>,</span>
<span>  eff_ba            <span class="op">=</span> <span class="fl">0.975</span>,</span>
<span>  fut_ba            <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span>  ev_ba             <span class="op">=</span> <span class="fl">15</span>,</span>
<span>  nmax_ba           <span class="op">=</span> <span class="fl">80</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Base trial configuration</span></span>
<span><span class="va">base_args</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  interval_cutpoints_sim   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">3</span>, <span class="fl">6</span>, <span class="fl">9</span>, <span class="fl">12</span>, <span class="fl">15</span>, <span class="fl">18</span>, <span class="fl">21</span>, <span class="fl">24</span><span class="op">)</span>,</span>
<span>  prior_alpha_params_model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0.01</span>, <span class="fl">8</span><span class="op">)</span>,</span>
<span>  prior_beta_params_model  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0.01</span>, <span class="fl">8</span><span class="op">)</span>,</span>
<span>  overall_accrual_rate     <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  interim_calendar_beat    <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  num_posterior_draws      <span class="op">=</span> <span class="fl">5000</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Scenario: historical median 6 mo, reference 6 mo, experimental 9 mo</span></span>
<span><span class="va">scenario</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>historical_median <span class="op">=</span> <span class="fl">6</span>, ref_median <span class="op">=</span> <span class="fl">6</span>, exp_median <span class="op">=</span> <span class="fl">9</span><span class="op">)</span></span>
<span></span>
<span><span class="va">oc</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/compute_hybrid_oc_rcpp.html">compute_hybrid_oc_rcpp</a></span><span class="op">(</span></span>
<span>  hybrid_theta    <span class="op">=</span> <span class="va">theta</span>,</span>
<span>  base_args       <span class="op">=</span> <span class="va">base_args</span>,</span>
<span>  scenario_params <span class="op">=</span> <span class="va">scenario</span>,</span>
<span>  num_simulations <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  seed            <span class="op">=</span> <span class="fl">42</span>,</span>
<span>  trial_mode      <span class="op">=</span> <span class="st">"hybrid"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Power:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">oc</span><span class="op">$</span><span class="va">power</span>, <span class="fl">3</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Type I:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">oc</span><span class="op">$</span><span class="va">type1</span>, <span class="fl">3</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"E[N] under null:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">oc</span><span class="op">$</span><span class="va">EN_null</span>, <span class="fl">1</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"P(conversion):"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">oc</span><span class="op">$</span><span class="va">P_conversion</span>, <span class="fl">3</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="core-api-reference">Core API Reference<a class="anchor" aria-label="anchor" href="#core-api-reference"></a>
</h2>
<div class="section level3">
<h3 id="simulation-functions">Simulation Functions<a class="anchor" aria-label="anchor" href="#simulation-functions"></a>
</h3>
<table class="table">
<colgroup>
<col width="52%">
<col width="47%">
</colgroup>
<thead><tr class="header">
<th>Function</th>
<th>Purpose</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code><a href="reference/run_simulation_pure.html">run_simulation_pure()</a></code></td>
<td>Simulate a single-arm or multi-arm trial with time-to-event endpoints</td>
</tr>
<tr class="even">
<td><code><a href="reference/run_scenarios.html">run_scenarios()</a></code></td>
<td>Run multiple scenario configurations over a shared baseline</td>
</tr>
<tr class="odd">
<td><code><a href="reference/scenarios_from_grid.html">scenarios_from_grid()</a></code></td>
<td>Generate factorial scenario grid from parameter choices</td>
</tr>
<tr class="even">
<td><code><a href="reference/run_simulation_binary.html">run_simulation_binary()</a></code></td>
<td>Simulate a binary-endpoint trial (one- or two-stage)</td>
</tr>
<tr class="odd">
<td><code><a href="reference/compute_hybrid_oc_rcpp.html">compute_hybrid_oc_rcpp()</a></code></td>
<td>Simulate hybrid seamless SA-to-BA trial via C++ engine</td>
</tr>
<tr class="even">
<td><code><a href="reference/create_hybrid_theta.html">create_hybrid_theta()</a></code></td>
<td>Construct the hybrid design parameter vector</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="design-calibration">Design Calibration<a class="anchor" aria-label="anchor" href="#design-calibration"></a>
</h3>
<table class="table">
<colgroup>
<col width="52%">
<col width="47%">
</colgroup>
<thead><tr class="header">
<th>Function</th>
<th>Purpose</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code><a href="reference/grid_calibrate.html">grid_calibrate()</a></code></td>
<td>Grid search over thresholds for optimal design calibration</td>
</tr>
<tr class="even">
<td><code><a href="reference/calibrate_alpha.html">calibrate_alpha()</a></code></td>
<td>Calibrate type I error across null scenarios</td>
</tr>
<tr class="odd">
<td><code><a href="reference/explore_early_stopping_from_cal.html">explore_early_stopping_from_cal()</a></code></td>
<td>Explore early stopping configurations from a calibration</td>
</tr>
<tr class="even">
<td><code><a href="reference/filter_early_grid.html">filter_early_grid()</a></code></td>
<td>Filter designs meeting alpha/power constraints</td>
</tr>
<tr class="odd">
<td><code><a href="reference/recommend_design_from_early.html">recommend_design_from_early()</a></code></td>
<td>Select best design from feasible set</td>
</tr>
<tr class="even">
<td><code><a href="reference/adopt_calibration.html">adopt_calibration()</a></code></td>
<td>Adopt a calibrated design into trial arguments</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="binary-endpoint-helpers">Binary Endpoint Helpers<a class="anchor" aria-label="anchor" href="#binary-endpoint-helpers"></a>
</h3>
<table class="table">
<colgroup>
<col width="52%">
<col width="47%">
</colgroup>
<thead><tr class="header">
<th>Function</th>
<th>Purpose</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code><a href="reference/find_simon_design.html">find_simon_design()</a></code></td>
<td>Find optimal or minimax Simon two-stage design</td>
</tr>
<tr class="even">
<td><code><a href="reference/simon_oc_exact.html">simon_oc_exact()</a></code></td>
<td>Exact operating characteristics for a Simon design</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="visualization-and-reporting">Visualization and Reporting<a class="anchor" aria-label="anchor" href="#visualization-and-reporting"></a>
</h3>
<table class="table">
<colgroup>
<col width="52%">
<col width="47%">
</colgroup>
<thead><tr class="header">
<th>Function</th>
<th>Purpose</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code><a href="reference/pretty_scenario_matrix.html">pretty_scenario_matrix()</a></code></td>
<td>Pivot simulation results to wide-format summary</td>
</tr>
<tr class="even">
<td><code><a href="reference/plot_calibration.html">plot_calibration()</a></code></td>
<td>Power vs type I error with Pareto frontier</td>
</tr>
<tr class="odd">
<td><code><a href="reference/plot_early_tradeoff.html">plot_early_tradeoff()</a></code></td>
<td>Early stopping trade-off visualization</td>
</tr>
<tr class="even">
<td><code><a href="reference/export_scenario_table_to_excel.html">export_scenario_table_to_excel()</a></code></td>
<td>Export results to formatted Excel workbook</td>
</tr>
<tr class="odd">
<td><code><a href="reference/export_scenario_table_to_png.html">export_scenario_table_to_png()</a></code></td>
<td>Export results to PNG via gt</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="diagnostics">Diagnostics<a class="anchor" aria-label="anchor" href="#diagnostics"></a>
</h3>
<table class="table">
<colgroup>
<col width="52%">
<col width="47%">
</colgroup>
<thead><tr class="header">
<th>Function</th>
<th>Purpose</th>
</tr></thead>
<tbody><tr class="odd">
<td><code><a href="reference/estimate_vsref_gate_timing.html">estimate_vsref_gate_timing()</a></code></td>
<td>Estimate when information gates can first be satisfied</td>
</tr></tbody>
</table>
</div>
<div class="section level3">
<h3 id="decision-rule-functions">Decision Rule Functions<a class="anchor" aria-label="anchor" href="#decision-rule-functions"></a>
</h3>
<table class="table">
<colgroup>
<col width="52%">
<col width="47%">
</colgroup>
<thead><tr class="header">
<th>Function</th>
<th>Purpose</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code><a href="reference/evaluate_sa_efficacy.html">evaluate_sa_efficacy()</a></code></td>
<td>Evaluate single-arm efficacy decision</td>
</tr>
<tr class="even">
<td><code><a href="reference/evaluate_sa_futility.html">evaluate_sa_futility()</a></code></td>
<td>Evaluate single-arm futility decision</td>
</tr>
<tr class="odd">
<td><code><a href="reference/evaluate_ba_efficacy.html">evaluate_ba_efficacy()</a></code></td>
<td>Evaluate between-arm efficacy decision</td>
</tr>
<tr class="even">
<td><code><a href="reference/evaluate_ba_futility.html">evaluate_ba_futility()</a></code></td>
<td>Evaluate between-arm futility decision</td>
</tr>
<tr class="odd">
<td><code><a href="reference/evaluate_conversion_trigger.html">evaluate_conversion_trigger()</a></code></td>
<td>Evaluate SA-to-BA conversion readiness</td>
</tr>
<tr class="even">
<td><code><a href="reference/make_conversion_decision.html">make_conversion_decision()</a></code></td>
<td>Execute conversion decision with SSR</td>
</tr>
<tr class="odd">
<td><code><a href="reference/perform_ssr.html">perform_ssr()</a></code></td>
<td>Sample size re-estimation for between-arm phase</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level2">
<h2 id="package-structure">Package Structure<a class="anchor" aria-label="anchor" href="#package-structure"></a>
</h2>
<pre><code>evolveTrial/
├── R/
│   ├── simulation_driver.R          # run_simulation_pure(), run_scenarios(), scenarios_from_grid()
│   ├── binary_endpoint.R            # run_simulation_binary(), find_simon_design(), simon_oc_exact()
│   ├── hybrid_trial.R               # create_hybrid_theta(), hybrid trial orchestration
│   ├── hybrid_sim_rcpp.R            # compute_hybrid_oc_rcpp()
│   ├── hybrid_decisions.R           # SA/BA efficacy/futility evaluators, conversion logic
│   ├── hybrid_ssr.R                 # perform_ssr()
│   ├── state_management.R           # Trial state containers
│   ├── design_analysis.R            # grid_calibrate(), plot_calibration(), pretty_scenario_matrix()
│   ├── gate_diagnostics.R           # estimate_vsref_gate_timing()
│   ├── interim_logic.R              # Stopping rule implementation
│   ├── posterior_helpers.R           # Bayesian posterior computation (R)
│   ├── posterior_cpp_dispatchers.R   # R-to-C++ dispatch for posterior draws
│   ├── predictive_probabilities.R   # Predictive probability computation
│   ├── data_generation.R            # Time-to-event data generation
│   ├── globals.R                    # Package-wide constants
│   ├── evolveTrial-package.R        # Package documentation
│   ├── zzz_imports.R                # Import declarations
│   └── RcppExports.R                # Auto-generated Rcpp bindings
├── src/
│   ├── hybrid_trial_sim.cpp         # C++ hybrid trial simulation engine
│   ├── posterior_sampling.cpp        # C++ posterior sampling with RcppArmadillo
│   └── predictive_probability.cpp   # C++ predictive probability calculations
├── tests/testthat/                  # 16 test files
├── vignettes/
│   └── design-overview.Rmd          # Methodology vignette
├── DESCRIPTION
├── NAMESPACE
└── LICENSE                          # MIT</code></pre>
</div>
<div class="section level2">
<h2 id="companion-package-baton">Companion Package: BATON<a class="anchor" aria-label="anchor" href="#companion-package-baton"></a>
</h2>
<p><a href="https://github.com/naimurashid/BATON" class="external-link"><strong>BATON</strong></a> (Bayesian Adaptive Trial Optimization) provides constrained Bayesian optimization for calibrating evolveTrial designs. While evolveTrial evaluates operating characteristics for a given design configuration, BATON searches over the design space to find configurations that satisfy frequentist constraints (e.g., type I error control) while optimizing an objective (e.g., minimizing expected sample size or maximizing power). Together, they form a complete pipeline for adaptive trial design calibration.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Typical workflow:</span></span>
<span><span class="co"># 1. Define trial structure in evolveTrial</span></span>
<span><span class="co"># 2. Use BATON::bo_calibrate() to search over evolveTrial's parameter space</span></span>
<span><span class="co"># 3. Extract optimal design with BATON::summarise_case_study()</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="running-tests">Running Tests<a class="anchor" aria-label="anchor" href="#running-tests"></a>
</h2>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">test</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="citation">Citation<a class="anchor" aria-label="anchor" href="#citation"></a>
</h2>
<p>If you use evolveTrial in your work, please cite:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode bibtex"><code class="sourceCode bibtex"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="va">@article</span>{<span class="ot">rashid2026constrained</span>,</span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a>  <span class="dt">title</span>   = {Constrained {Bayesian} Optimization for Calibration of</span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a>             {Bayesian} Adaptive Clinical Trials},</span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a>  <span class="dt">author</span>  = {Rashid, Naim U.},</span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a>  <span class="dt">journal</span> = {Journal of the American Statistical Association},</span>
<span id="cb16-6"><a href="#cb16-6" tabindex="-1"></a>  <span class="dt">year</span>    = {2026}</span>
<span id="cb16-7"><a href="#cb16-7" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="license">License<a class="anchor" aria-label="anchor" href="#license"></a>
</h2>
<p>MIT. See <a href="LICENSE">LICENSE</a> for details.</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing evolveTrial</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Naim Rashid <br><small class="roles"> Author, maintainer </small>   </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/naimurashid/evolveTrial/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/naimurashid/evolveTrial/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Naim Rashid.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
